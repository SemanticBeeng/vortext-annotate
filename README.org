#+BEGIN_HTML
<img src="https://raw.githubusercontent.com/joelkuiper/spa/master/documentation/images/logo.jpg" alt="logo" align="right" height="175" />
#+END_HTML

#+BEGIN_QUOTE
From the Old Norse word spá or spæ referring to prophesying and which is cognate with the present English word "spy," continuing Proto-Germanic *spah- and the Proto-Indo-European root *(s)peḱ (to see, to observe) --- [[http://en.wikipedia.org/wiki/V%C3%B6lva][vǫlva (wikipedia)]]
#+END_QUOTE

* Introduction
Unstructured PDF documents remain the main vehicle for dissemination of scientific findings.
Those interested in gathering and assimilating data must therefore manually peruse published articles and extract from these the elements of interest.
Evidence-based medicine provides a compelling illustration of this: many person-hours are spent each year extracting summary information from articles that describe clinical trials.
Machine learning provides a potential means of mitigating this burden by automating extraction.
But, for automated approaches to be useful to end-users, we need tools that allow domain experts to interact with, and benefit from, model predictions.
To this end, we present an web-based tool called Spá that accepts as input an article and provides as output an automatically visually annotated rendering of this article.
More generally, Spá provides a framework for visualizing predictions, both at the document and sentence level, for full-text PDFs.

* Example
You can try the visualizer at [[http://spa.clinici.co]] and use one of the Randomized Clinical Trials from the [[https://github.com/joelkuiper/spa/tree/master/examples][examples]] folder.

* Technical overview
Spá relies on [[http://mozilla.github.io/pdf.js][Mozilla PDF.js]] for visualization of the document and text extraction.
The results of the text extraction are processed server-side.
Results are communicated back to the browser and displayed using [[http://facebook.github.io/react][React]].

For each of the annotations the relevant nodes in the document are highlighted and a custom scrollbar, inspired by [[http://substance.io/beta/][substance.io]], that acts as a mini-map is projected to show where it resides within the document.
The user can interactively activate and inspect specific results.

* Development prerequisites
** Mac OS X
   The server-side is written in [[http://clojure.org/][Clojure]]. To develop the server we require [[%20http://leiningen.org/][leiningen]] which can be installed with [[http://brew.sh/][Homebrew]].
   Make sure to have a recent version of the JVM as well.
   #+BEGIN_SRC
 brew install leiningen # install via Homebrew
 lein deps # retrieve project dependencies
 lein trampoline run # will run the server
   #+END_SRC
   For the [[https://en.wikipedia.org/wiki/Remote_procedure_call][RPC]] functionality we rely on [[http://zeromq.org/][ZeroMQ]] with JSON as the default serialization format.

   #+BEGIN_SRC
 brew install zeromq
 sudo easy_install pyzmq # python bindings, pip fails on Mavericks (alternatively use pip install pyzmq-static)
 npm install zeromq atob commander q # Node.js requirements
   #+END_SRC

The requirements for the Evidence-based medicine processing topology are specified within that directory.
* Future work
See [[https://github.com/joelkuiper/spa/issues?labels=idea&state=open][ideas]] or the other issues.

* Contributing
Currently this is a research object.
The API and organizational structure are subject to change.
Comments and suggestions are much appreciated.
For code contributions: fork, branch, and send a pull request.

* LICENSE
Spa is open source, and licensed under [[http://gplv3.fsf.org/][GPLv3]]. See [[https://github.com/joelkuiper/spa/blob/master/LICENSE.md][LICENSE.md]] for more information.
